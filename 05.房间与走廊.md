# 5. 房间与走廊

房间和走廊在地牢里面都是有明（lit）有暗（dark）的。任何在你的视线所照亮的区域都将显示出来；黑暗的区域只会在距离你一格的地方被显示。墙和走廊将会在当你探索到它们的时候保持在地图上。

秘密的走廊将被隐藏起来。你可以通过使用`s`（search）命令来找到它们。

## 5.1 门口（Doorways）

门口连接了房间和走廊。有一些门口是没有门的；你可以直接走过起。另外一些门口会有门存在，这门可以打开，关上，或是锁上。使用`o`（open）命令来打开一扇门；使用`c`（close）命令来关上一扇门。

你可以使用一些工具然后使用`a`（apply）命令来打开锁上的门，或是使用`^D`（kick，踢）命令来直接踢开它。

在打开门后无法斜着进入门；你必须要有接近它们然后垂直或水平地直着走进去。没有门的门口不受这个限制。

门可以有效地将怪物关在门外。大多数的怪物无法打开门，即使尽管少数的不需要这样做（例如，幽灵可以直接穿过门）。

密门是隐藏着的。你可以使用`s`（search）命令来找到它们。一旦找到后，它们就等同于普通的门。

## 5.2 陷阱（Traps，`^`）

在地牢中始终存在陷阱来捕获（snare）粗心的（unwary）的探索者（delver）。例如你可能会突然掉进一个坑里被陷住然后耗费数回合后才能爬上来。陷阱不会显示在你的地图上直到你移动到该陷阱上面触发后，或看到一些东西是掉入到里面，或是你使用`s`（search）命令发现它。怪物也可以因为陷阱被捕获，这是一种很有用的防御策略。

存在一个预先绘制好地图的基于经典电子游戏“Sokoban”（推箱子）的特殊分支。他的目标是将巨石推入坑洞中。经过斟酌后，你能够通过传统的推箱子有来完成所有的地牢层。一旦玩家被困住了，一些补救的措施是允许的；不过那样做会降低你的幸运值。

## 5.3 楼梯和梯子（Stairs and ladders，`<`，`>`）

通常，地牢每一层都会有一个往上（`<`）通往先前一层和一个往下（`<`）通往下一层的楼梯。这里也有一些例外。例如，在地牢探索的早期，你将会发现一层会有两个往下的楼梯，其中一个依然是直接通往下一层，另一个则是进入一个被称为Gnomish Mines的区域。这些矿区最终会导致死亡结局，所以在完成对这些矿区的探索后（如果你选择这样做），你需要爬回到主地牢层。

当你穿越了一些楼梯，或是触发一个陷阱导致将你送往其他一层，你离开的地牢层将会失效并将数据保存为一个文件存放到硬盘上。如果你移动到先前你曾访问过的地牢层，该层的数据将从硬盘上的文件中加载到游戏中并再次生效。如果你移动到你从未访问过的地牢层，该层将被创建（大多数从随机生成的地牢层加载，对于一些“special（特殊）”层从模板中加载，对于“bones（尸骨）”层会从先前游戏所留下的东西中进行加载。稍后会详细描述）。怪物只会在当前层激活；那些在其他层的怪物事实上是停滞不动的。

通常当你爬上楼梯后，你将会到达你目的地的楼梯口。然而，**宠物（pets）**（见下文）和一些其他的怪物在当你上楼或下楼时如果离你足够的近的话将会一直跟随你，并有时在你爬楼梯时和你换位。当这样的情况发生时，宠物或是其他的怪物将会到达楼梯口而你则会在附近停下。

梯子提供和楼梯一样的效果，并且这两种用于地牢层间连接的东西在游戏中几乎无法分辨（indistinguishable，难以区分的）。

## 5.4 商店与购物（Shops and shopping）

有时你将会进入一个房间，房间里面会有一位商店主以及很多摆放在地上的物品。你可以通过捡起它们然后使用`p`命令来购买。你可以在捡起它们之前使用`#chat`命令打听物品的价格。在付款前就使用该物品会招来商店主的指责，并且商店主在你付款之前是不会让你离开商店的。

你可以丢掉一些东西在商店的地上来向商店主出售它们。商店主会给出一个价格并且询问你是否愿意以该价格卖掉它们，或者是告诉你他对这件东西不感兴趣（通常，你的东西需要和商店售卖的东西的类型相符）。

如果你不小心把一些东西丢到了地上，商店主会直接宣布该物品的所有权而不会提供任何的报价。如果想要重新再获得这个物品，你必须付款购买它。

商店主有时候会花光他的钱。当这种情况出现时，当你想要试图售卖一些东西你会得到一个信用值（credit）而不是金币。信用值可以用于付款，但是信用值只会在被获得的商店才有用；其他的商店主不会承认。（如果你在地牢里面偶然发现了一张信用卡“credit card”，不要试图用它来进行付款；商店主不会接受它。

`$`命令会显示你当前携带的黄金的数量（在物品清单中的，不包括包里或盒子里面），该命令也会显示在商店里的欠款或是信用值。`Iu`命令会列出所有未付款的物品（这些物品还属于商店）当你拿着它们。`Ix`命令会以清单风格显示未付款但是用掉的物品，以及其他商店的费用，如果有的话。

### 5.4.1 商店的特性（Shop idiosyncrasies）

有些商店会有出乎意料的行为。

- 商店物品的价格会因为各种各样的因素而不同。

- 商店主会将紧挨着门的一格视为商店外。

- 当商店主像鹰一样盯着你的时候，他通常会忽略其他的顾客。

- 如果一家商店是“因为清点库存而关门（closed for inventory）”，那么它们通常不会自己打开。

- 商店无论如何也不会因为物品耗尽而补货。
